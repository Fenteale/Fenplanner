<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="css/entries.css">
<meta charset="UTF-8">
<title>Fenplanner</title>
</head>
<body>
    <h1>Fenplanner</h1>
    <div class="row">
    
    <div class="entries">
        <div class="card">
            <h2>Login</h2>
            <form onsubmit="enterPassword()">
                <input type="password" id="password" />
                <button type="submit" onclick="enterPassword()">Submit</button>
            </form>
        </div>
    </div>
    </div>
</body>
<script>
    function enterPassword() {
        const pw = document.getElementById("password").value;
        const encoder = new TextEncoder();
        const pwe = encoder.encode(pw);
        crypto.subtle.digest('SHA-512', pwe).then((ok) => {
            const pwedec = Array.prototype.map.call(new Uint8Array(ok), x=>(('00'+x.toString(16)).slice(-2))).join('');
            document.location = "login?hpw=" + pwedec;
        });
        
    }
</script>